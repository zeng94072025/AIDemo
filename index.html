<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI圖片優化助手</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- 頂部導航欄 -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <svg width="32" height="32" viewBox="0 0 32 32">
                    <circle cx="16" cy="16" r="14" fill="none" stroke="#007AFF" stroke-width="2"/>
                    <path d="M8 16 L14 22 L24 10" stroke="#007AFF" stroke-width="2" fill="none"/>
                    <circle cx="16" cy="16" r="6" fill="#007AFF" opacity="0.2"/>
                </svg>
                <h1>AI圖片優化助手</h1>
            </div>
            <div class="header-actions">
                <button class="btn btn-secondary" id="helpBtn">
                    <i class="fas fa-question-circle"></i>
                    幫助
                </button>
                <button class="btn btn-primary" id="settingsBtn">
                    <i class="fas fa-cog"></i>
                    設置
                </button>
            </div>
        </div>
    </header>

    <!-- 主要內容區域 -->
    <main class="main-content">
        <!-- 左側面板 - 圖片上傳和管理 -->
        <div class="left-panel">
            <!-- 圖片上傳區域 -->
            <div class="upload-section">
                <h2>圖片管理</h2>
                <div class="upload-hint-top">支持 JPG、PNG、GIF、WEBP、BMP 格式</div>
                <div class="upload-area" id="uploadArea">
                    <div class="upload-content">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>拖拽或點擊上傳</p>
                        <input type="file" id="fileInput" multiple accept="image/*" style="display: none;">
                        <button class="btn btn-primary" id="selectFileBtn">
                            選擇文件
                        </button>
                    </div>
                </div>
                
                <!-- 已上傳圖片列表 -->
                <div class="uploaded-images" id="uploadedImages">
                    <h3>已上傳圖片</h3>
                    <div class="image-navigation">
                        <button class="nav-btn nav-left" id="navLeft" disabled>
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <div class="image-list" id="imageList"></div>
                        <button class="nav-btn nav-right" id="navRight" disabled>
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                    <div class="uploaded-count-hint" id="uploadedCountHint">
                        總計：0 張圖片
                    </div>
                </div>
                
                <!-- 處理進度條 -->
                <div class="processing-progress" id="processingProgress" style="display: none;">
                    <div class="progress-info">
                        <span id="progressStatusText">就緒</span>
                        <span id="progressPercentage">0%</span>
                    </div>
                    <div class="progress-bar" id="progressBar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 中間面板 - 圖片預覽和下載 -->
        <div class="center-panel">
            <!-- 圖片預覽區域 -->
            <div class="preview-section">
                <h2>圖片預覽</h2>
                <div class="preview-hint-top">點擊左側圖片預覽</div>
                <div class="preview-container" id="previewContainer">
                    <div class="preview-placeholder">
                        <i class="fas fa-image"></i>
                        <p>等待圖片</p>
                    </div>
                </div>
                
                <!-- 預覽控制 -->
                <div class="preview-controls">
                    <button class="btn btn-secondary" id="prevBtn" disabled>
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <span id="imageCounter">0 / 0</span>
                    <button class="btn btn-secondary" id="nextBtn" disabled>
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>

                <!-- 下載快捷按鈕 -->
                <div class="download-quick-actions">
                    <button class="btn btn-primary" id="downloadCurrent" disabled>
                        <i class="fas fa-download"></i>
                        下載當前圖片
                    </button>
                    <button class="btn btn-secondary" id="downloadAll" disabled>
                        <i class="fas fa-download"></i>
                        下載所有圖片
                    </button>
                </div>
            </div>
        </div>

        <!-- 右側面板 - 處理工具 -->
        <div class="right-panel">
            <!-- 處理工具面板 -->
            <div class="tools-section">
                <h2>處理工具</h2>
                <div class="tools-hint-top">選擇圖片後使用工具處理</div>
                <div class="tools-tabs">
                    <button class="tab-btn active" data-tab="basic">基礎處理</button>
                    <button class="tab-btn" data-tab="advanced">高級處理</button>
                    <button class="tab-btn" data-tab="effects">特效濾鏡</button>
                    <button class="tab-btn" data-tab="drawing">塗鴉標註</button>
                </div>
                <div class="tools-content">
                
                <!-- 基礎處理工具 -->
                <div class="tab-content active" id="basic">
                    <div class="tool-group">
                        <h3>基礎處理</h3>
                        <div class="tool-buttons">
                            <button class="tool-btn" data-action="brighten">提亮</button>
                            <button class="tool-btn" data-action="contrast">增加對比度</button>
                            <button class="tool-btn" data-action="grayscale">黑白濾鏡</button>
                            <button class="tool-btn" data-action="sepia">復古濾鏡</button>
                            <button class="tool-btn" data-action="invert">反轉濾鏡</button>
                        </div>
                    </div>
                    
                    <div class="tool-group">
                        <h3>參數調節</h3>
                        <div class="parameter-controls">
                            <label>亮度: <input type="range" id="brightness" min="-100" max="100" value="0"></label>
                            <label>對比度: <input type="range" id="contrast" min="-100" max="100" value="0"></label>
                        </div>
                    </div>
                    
                    <div class="tool-group">
                        <h3>格式轉換</h3>
                        <div class="format-controls">
                            <select id="outputFormat">
                                <option value="jpeg">JPEG</option>
                                <option value="png">PNG</option>
                            </select>
                            <input type="number" id="quality" min="1" max="100" value="90" placeholder="質量">
                            <button class="btn btn-primary" id="convertFormat">轉換格式</button>
                        </div>
                    </div>
                </div>
                
                <!-- 高級處理工具 -->
                <div class="tab-content" id="advanced">
                    <div class="tool-group">
                        <h3>濾鏡效果</h3>
                        <div class="filter-grid">
                            <button class="filter-btn" data-filter="grayscale">黑白</button>
                            <button class="filter-btn" data-filter="sepia">復古</button>
                            <button class="filter-btn" data-filter="invert">反轉</button>
                        </div>
                    </div>
                    
                    <div class="tool-group">
                        <h3>圖片調整</h3>
                        <div class="tool-buttons">
                            <button class="tool-btn" data-action="brighten">提亮</button>
                            <button class="tool-btn" data-action="contrast">增加對比度</button>
                        </div>
                    </div>
                </div>
                
                <!-- 特效濾鏡工具 -->
                <div class="tab-content" id="effects">
                    <div class="tool-group">
                        <h3>藝術濾鏡</h3>
                        <div class="filter-grid">
                            <button class="filter-btn" data-filter="grayscale">黑白</button>
                            <button class="filter-btn" data-filter="sepia">復古</button>
                            <button class="filter-btn" data-filter="invert">反轉</button>
                        </div>
                    </div>
                    
                    <div class="tool-group">
                        <h3>相框效果</h3>
                        <div class="frame-grid">
                            <button class="frame-btn" data-frame="classic">經典相框</button>
                            <button class="frame-btn" data-frame="modern">現代相框</button>
                            <button class="frame-btn" data-frame="vintage">復古相框</button>
                            <button class="frame-btn" data-frame="elegant">優雅相框</button>
                            <button class="frame-btn" data-frame="minimal">極簡相框</button>
                            <button class="frame-btn" data-frame="artistic">藝術相框</button>
                        </div>
                    </div>
                </div>
                
                <!-- 塗鴉標註工具 -->
                <div class="tab-content" id="drawing">
                    <div class="tool-group">
                        <h3>繪製工具</h3>
                        <div class="drawing-tools">
                            <button class="drawing-btn active" data-tool="brush">畫筆</button>
                            <button class="drawing-btn" data-tool="eraser">橡皮擦</button>
                            <button class="drawing-btn" data-tool="line">直線</button>
                            <button class="drawing-btn" data-tool="rectangle">矩形</button>
                            <button class="drawing-btn" data-tool="circle">圓形</button>
                            <button class="drawing-btn" data-tool="text">文字</button>
                        </div>
                    </div>
                    
                    <div class="tool-group">
                        <h3>標註工具</h3>
                        <div class="annotation-tools">
                            <button class="annotation-btn" data-annotation="arrow">箭頭</button>
                            <button class="annotation-btn" data-annotation="highlight">高亮</button>
                            <button class="annotation-btn" data-annotation="stamp">印章</button>
                            <button class="annotation-btn" data-annotation="measure">測量</button>
                        </div>
                    </div>
                    
                    <div class="tool-group">
                        <h3>顏色設置</h3>
                        <div class="color-controls">
                            <input type="color" id="drawingColor" value="#ff0000">
                            <input type="range" id="brushSize" min="1" max="50" value="5">
                            <span id="brushSizeValue">5px</span>
                        </div>
                    </div>
                </div>
                </div>
            </div>
        </div>
    </main>

    <!-- 設置模態框 -->
    <div class="modal" id="settingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>設置</h2>
                <button class="modal-close" id="closeSettingsModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="settings-content">
                    <h3>文件設置</h3>
                    <label>
                        最大文件大小: <input type="number" id="maxFileSize" value="10" min="1" max="50"> MB
                    </label>
                    <label>
                        並行處理數量: <input type="number" id="maxWorkers" value="4" min="1" max="8">
                    </label>
                    
                    <h3>處理設置</h3>
                    <label>
                        <input type="checkbox" id="autoSave" checked>
                        自動保存處理結果
                    </label>
                    <label>
                        <input type="checkbox" id="highQuality">
                        高質量處理模式
                    </label>
                    
                    <h3>下載設置</h3>
                    <label>
                        <input type="checkbox" id="keepOriginal" checked>
                        保留原圖
                    </label>
                    <label>
                        <input type="checkbox" id="createZip">
                        打包下載
                    </label>
                    <label>
                        文件名前綴: <input type="text" id="filenamePrefix" value="processed_">
                    </label>
                </div>
            </div>
        </div>
    </div>

    <!-- 幫助模態框 -->
    <div class="modal" id="helpModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>使用幫助</h2>
                <button class="modal-close" id="closeHelpModal">&times;</button>
            </div>
            <div class="modal-body">
                <h3>快速開始</h3>
                <ol>
                    <li>上傳圖片：拖拽或點擊上傳按鈕選擇圖片</li>
                    <li>選擇工具：使用右側面板的工具進行圖片處理</li>
                    <li>預覽效果：在預覽區域查看處理結果</li>
                    <li>下載保存：處理完成後下載到本地</li>
                </ol>
                
                <h3>功能特色</h3>
                <ul>
                    <li>智能優化：自動優化圖片質量</li>
                    <li>多種濾鏡：豐富的藝術濾鏡效果</li>
                    <li>精確調整：亮度、對比度等參數調節</li>
                    <li>批量處理：支持多張圖片同時處理</li>
                    <li>格式轉換：支持多種圖片格式轉換</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- 隱藏的Canvas元素 -->
    <canvas id="hiddenCanvas" style="display: none;"></canvas>
    
    <!-- JavaScript文件 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/fixedImageProcessor.js"></script>
    <script src="js/uiController.js"></script>
    <script src="js/main.js"></script>
</body>
</html> 